<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações perfil</title>
    <link rel="stylesheet" href="css/styleUsuario.css">
</head>

<body>

    <img src="assets/icon/seta sair.png" class="sairLogin" onclick="sair()">
    <DIV id="perfil">
        <H1> ATUALIZAR PERFIL USUARIO</H1>
    </DIV>
    <div class="dados">
        <div class="usuario">
            <div>
                <h3>Link foto perfil usuario: </h3> <br> <input value="" id="input_link" type="text">
            </div>
            <div>
                <h3>nome: usuario </h3> <br><input value="" id="input_nome" type="text">
            </div>
            <div>
                <h3>email usuario </h3><br><input id="input_email" type="text">
            </div>
            <div>
                <h3>senha usuario </h3> <br> <input disabled placeholder="*******" type="password">
            </div>
            <div>
                <button onclick="editar()">editar</button>
                <button>excluir</button>
            </div>
        </div>
    </div>

</body>

</html>
<script>
    input_link = `${sessionStorage.LINK_FOTO_USUARIO}`;
    input_nome.value = `${sessionStorage.NOME_USUARIO}`;
    input_email.value = `${sessionStorage.EMAIL_USUARIO}`;

    function sair() {
        window.location = "index.html";
    }
    function editar() {
        fetch(`/usuarios/editar/${sessionStorage.getItem("ID_USUARIO")}`, {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                linkImagem: input_link,
                nomeNovo: input_nome.value,
                emailNovo: input_email.value,
                
            })
        }).then(function (resposta) {

            if (resposta.ok) {
                window.alert("ATUALIZADO COM SUCESSO");
                
            } else if (resposta.status == 404) {
                window.alert("Deu 404!");
            } else {
                throw ("Houve um erro ao tentar realizar a postagem! Código da resposta: " + resposta.status);
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
        });
    }
</script>