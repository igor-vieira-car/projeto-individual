<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/style.css">
  <title>Projeto idividuas</title>
</head>

<body>
  <nav>
    <div>
      logo
    </div>
    <ul id="listHome">
      <li></li>
      <li><a href="#">home</a> </li>

      <li><a href="#">Livros</a></li>

      <li><a href="#">Pedir ajuda</a></li>

      <li><a href="#">contatos</a></li>
    </ul>

    <div id="signup">
      <a href="login.html">login</a>

      <a href="cadastro.html">cadastro</a>
    </div>
  </nav>

  <div id="carousel">

    <button onclick="voltar()">""</button>

    <div id="imagemCarousel">
      carousel
    </div>

    <button id="passar" onclick="passar()">""</button>
  </div>

  <div id="text_novos" style="width: 100%; text-align: center; margin-top: 5%;">
    <h1>
    Mangás lançados recentemente</h1>
  </div>
  <DIV id="div_novos">

    <button>""</button>

    <div id="novo" style=" width: 100%;height: 100%; background-color: aqua; display: flex; justify-content: space-evenly;">
    </div>

    <button>""</button>
  </DIV>



  <div style="width: 100%; justify-content: right; display: flex;"> <input type="text" id="pesquisar_input"> <button
      onclick="pesquisar()">Pesquisar</button></div>
  <div id="biblioteca">

    <div id="genero">
      <ul>
        <li><a href="#">Romance</a></li>
        <li><a href="#">Jogos</a></li>
        <li><a href="#">Ação</a></li>
        <li><a href="#">Comédia</a></li>
        <li><a href="#">Terror</a></li>
      </ul>
    </div>

    <div id="estante">
    </div>
  </div>



  <footer>
    <div>
      Sobre nos
      <br style="margin-top: 0%; background-color: black;">
      Sobre nos
      <br>
      Sobre nos
      <br>
      Sobre nos
    </div>
    <div>
      Enderecos
    </div>

    <div>
      links
    </div>

    <div>
      contatos
    </div>
  </footer>
</body>

</html>

<script>


  var novoss = [`<img src="https://m.media-amazon.com/images/I/5191HKIfUPL._SY344_BO1,204,203,200_QL70_ML2_.jpg" id="itemNovos" alt="">`];
  var i = 0;
  while (i < 4) {
    i++
    novo.innerHTML += novoss[0];
  }

  fetch("/avisos/listarLivro").then(function (resposta) {
    if (resposta.ok) {
      if (resposta.status == 204) {
      }

      resposta.json().then(function (resposta) {
        console.log("Dados recebidos: ", JSON.stringify(resposta));
        console.log(resposta);
        var feed = document.getElementById("feed_container");

        for (var i = 0; i < resposta.length; i++) {
          var publicacao = resposta[i];

          estante.innerHTML += `
            <a id="container">
              <img
                src="${publicacao.linkImagem}" alt="">
            </a>
          `
        }

      });
    } else {
      throw ('Houve um erro na API!');
    }
  }).catch(function (resposta) {
    console.error(resposta);
  });

  /*------------------------------Pesqui9sa----------------------------------------------------*/
  
  function pesquisar() {
    var pesquisarVar = pesquisar_input.value;
    fetch(`/avisos/pesquisar/${pesquisarVar}`).then(function (resposta) {
      if (resposta.ok) {
        
        if (resposta.status == 204) {
          alert("Nenhum resultado encontrado.");

        }

        resposta.json().then(function (resposta) {
          console.log("Dados recebidos: ", JSON.stringify(resposta));
          console.log(resposta);
          var feed = document.getElementById("feed_container");

          estante.innerHTML = ``
          for (var i = 0; i < resposta.length; i++) {
            var pesquisa = resposta[i];

            estante.innerHTML += `
            <a id="container">
              <img
                src="${pesquisa.linkImagem}" alt="">
            </a>
          `;
          }

        });
      } else {
        throw ('Houve um erro na API!');
      }
    }).catch(function (resposta) {
      console.error(resposta);
    });
  }



  /*------------------------------CAROUSEL----------------------------------------------------*/
  var num = 2;
  imagemCarousel.innerHTML = `<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/Mango_-_single.jpg/1024px-Mango_-_single.jpg" alt="">`

  var carousel = {
    verificar: function () {
      if (num == 0) {
        num = 3;
      } else if (num == 4) {
        num = 1;
      }
    },
    imgCarousel: function () {
      if (num == 1) {
        imagemCarousel.innerHTML = `<img src="https://static.mundoeducacao.uol.com.br/mundoeducacao/2021/05/manga.jpg" alt="">`

      } if (num == 2) {
        imagemCarousel.innerHTML = `<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/Mango_-_single.jpg/1024px-Mango_-_single.jpg" alt="">`

      } if (num == 3) {
        imagemCarousel.innerHTML = `<img src="https://static.mundoeducacao.uol.com.br/mundoeducacao/2021/05/manga.jpg" alt="">`
      }
    },
  }

  setInterval(function () {
    passar();
  }, 3001);



  function voltar() {
    num--;
    carousel.verificar();
    carousel.imgCarousel();
  }

  function passar() {
    num++;
    carousel.verificar();
    carousel.imgCarousel();
  }
  /*------------------------------FIM CAROUSEL----------------------------------------------------*/

</script>